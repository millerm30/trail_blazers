---
let lat = import.meta.env.SECRET_lat;
let lon = import.meta.env.SECRET_lon;
const apiKey = import.meta.env.SECRET_apiKey;
const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`);
const data = await response.json();
const weatherImage = `https://openweathermap.org/img/wn/${data.weather[0].icon}.png`;
---

<aside class="col-span-2 row-span-1 bg-white lg:mt-10 mb-6 p-4 lg:rounded-l-lg border-t-[1px] border-l-[1px] border-b-[1px] border-gray-300 lg:ml-4 text-black md:col-span-1 lg:col-span-1">
  <div class="flex justify-around">
    <div class="text-center">
      <img src={weatherImage} alt={data.weather[0].description} class="w-20 inline" />
      <p class="uppercase font-bold">{data.weather[0].description}</p>
      <span class="flex flex-col justify-between py-2">
        <p class="font-bold">Current Temp:</p>
        <span class="flex justify-center">
          <p class="text-5xl font-bold py-2">{Math.round(parseFloat(data.main.temp))}</p>
          <sup class="text-xl font-bold py-2">&degC</sup>
        </span>
      </span>
    </div>
    <div>
      <h2 class="text-2xl font-bold py-2">Local Weather</h2>
      <span class="flex justify-between py-2">
        <p class="font-bold">Location:</p>
        <p>Plate Cove</p>
      </span>
      <span class="flex justify-between py-2">
        <p class="font-bold">High:</p>
        <p>{Math.round(parseFloat(data.main.temp_max))} <span class="font-bold">&degC</span></p>
      </span>
      <span class="flex justify-between py-2">
        <p class="font-bold">Low:</p>
        <p>{Math.round(parseFloat(data.main.temp_min))} <span class="font-bold">&degC</span></p>
      </span>
      <span class="flex justify-between py-2">
        <p class="font-bold">Feels Like:</p>
        <p>{Math.round(parseFloat(data.main.feels_like))} <span class="font-bold">&degC</span></p>
      </span>
    </div>
  </div>
</aside>